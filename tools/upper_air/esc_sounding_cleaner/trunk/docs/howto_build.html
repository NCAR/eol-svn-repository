<html>
<head>
    <title>How To: Build/Develop the ESC Sounding Cleaner</title>
    <link rel="stylesheet" type="text/css" href="/css/howto.css" />
</head>
<body>
<h1 class="title">How To: Build/Develop the ESC Sounding Cleaner</h1>

<a name="top"></a>
<h2>Contents</h2>
<ol>
    <li><a href="#about">About</a></li>
    <li><a href="#build">Build</a></li>
    <li><a href="#develop">Development</a></li>
    <li><a href="#checks">Checks</a></li>
</ol>
<hr />

<a name="about"></a>
<h2>About</h2>
<p>This document contains information that may be useful to anyone going to work on the sounding cleaning software.</p>
<p>The software described in this document is written in Java 1.5 with the use of generics. Java 1.5 or newer is required for the software to run.</p>

<p><a href="#top">Top</a></p>
<hr />


<a name="build"></a>
<h2>Build</h2>
<p>The build is defined in the <i>build.xml</i> file and uses Ant.  If you have not configured Ant in your environment, you will need to follow the instructions <a href="http://www.eol.ucar.edu/about/our-organization/cds/dmg/dmg-internal/dmg-documentation/how-to/ant-setup-and-use/#environment">here</a> or you won't be able to build the checkers with Ant.</p>

<h3>Directory Layout</h3>
<table class="directories">
   <tr>
      <th>build</th>
      <td>This directory may not exist initially and is removed when the <span class="softwareName">clean</span> comman is run.  It contains the .class files generated from compiling the .java source.</td>
   </tr>
   <tr>
      <th>dist</th>
      <td>This directory is generated by the build when the jar file is being prepared for production.  This is used so the user can check the contents of the layout before deploying it into production.  This directory is removed when the <span class="softwareName">clean</span> command is run.</td>
   </tr>
   <tr>
      <th>docs</th>
      <td>This directory contains all fo the documentation for the sounding cleaner.  It also contains an API directory which is automatically created for the javadocs and is removed when the <span class="softwareName">clean</span> command is run.</td>
   </tr>
   <tr>
      <th>src</th>
      <td>This directory contains all of the .java source files for the sounding cleaner.</td>
   </tr>
   <tr>
      <th>test_data</th>
      <td>This directory contains a set of test .cls files and output logs used for testing the sounding cleaner.</td>
   </tr>
   <tr>
      <th>tests</th>
      <td>This directory the JUnit .java source files used for testing the sounding cleaner.  This does not contain any production software.</td>
   </tr>
</table>

<h3>build.xml Targets</h3>
<table class="directories">
   <tr>
      <th>clean</th>
      <td>Remove all generated content from the working area.  This removes the build, dist, and docs/api directories.</td>
   </tr>
   <tr>
      <th>compile</th>
      <td>Compile the sounding cleaner source code for execution.  The .class files are placed into the build directory.</td>
   </tr>
   <tr>
      <th>compileTests</th>
      <td>Compile the sounding cleaner test source code.  This requires the source files to be compiled and will perform the operation if necessary.</td>
   </tr>
   <tr>
      <th>deploy</th>
      <td>Copy the jar file to the production area and replace all of the public javadocs with a fresh copy.  This will perform all necessary operations to create the jar file and generate the javadocs that have not been performed already.</td>
   </tr>
   <tr>
      <th>dist</th>
      <td>Generate the jar file to be used in production.  This will compile the .java files if they have not already been created.  The jar file does not contain any test software.</td>
   </tr>
   <tr>
      <th>javadoc</th>
      <td>Create the javadoc files for the non-test source files.  This also copies the howtos as part of the API.  The files are added to the docs/api directory so the directory can be copied to the public area on deployment.</td>
   </tr>
   <tr>
      <th>test</th>
      <td>Execute the JUnit tests for the sounding cleaner.  All failures need to be addressed before the jar file is deployed.</td>
   </tr>
</table>

<p><a href="#top">Top</a></p>
<hr />


<a name="develop"></a>
<h2>Development</h2>
<p>The sounding cleaner is defined in the ESCSoudningCleaner class.  It cleans a single sounding by performing a collection of tests on a record using a previously discovered record that has the necessary information for the comparison.  If any of the tests fail, the record is nullified (all non-time values set to missing), a message is written to the log file, and moves on to the next record.  If the record passes all of the tests, it will try to become the next record used for comparing the records.  This continues until the end of the sounding is reached.</p>

<p><a href="#top">Top</a></p>
<hr />


<a name="checks"></a>
<h2>Checks</h2>
<p>The following is the list of tests that must be passed to be considered acceptable in the ESC sounding cleaner.</p>
<ul>
    <li>The pressure value must be within 10mb if the pressure increased from the previously accepted record.</li>
    <li>The pressure rate must decrease at a rate less than or equal to 3 mb/sec from the previously accepted record.</li>
    <li>The altitude value must be within 100m if the altitude decreased from the previously accepted record.</li>
    <li>The altitude rate must increase at a rate less than or equal to 50 m/s from the previously accepted record.</li>
    <li>Any zero altitude record must have the previous record's altitude within 50 m of the surface.</li>
</ul>

<p><a href="#top">Top</a></p>
<hr />

<p class="foot">Last Updated: March 19, 2008 - jclawson</p>
</body>
</html>
