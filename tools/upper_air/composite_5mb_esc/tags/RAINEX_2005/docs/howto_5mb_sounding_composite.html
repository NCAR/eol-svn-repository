<html>
<head>
<title>How To: Create the 5mb Pressure Level Sounding Composite</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="/dpg/GENERAL/dpg_howto.css">
</head>

<body>
<h1>How To: Create the 5mb Pressure Level Sounding Composite</h1>
<h2>Table of Contents</h2>
<ol>
	<li><a href="#purpose">Purpose</a></li>
	<li>Previous Versions<ol>
                <li><a href="#version_rainex">RAINEX 2005</a></li>
                <li><a href="#version_trex">T-REX 2006</a></li>
		<li><a href="#version_rico">RICO_2004-2005</a></li>
		</ol></li>
	<li><a href="#directory">Directory Structure</a></li>
	<li>Processing the Data<ol>
	        <li><a href="#copy">Copy the 5mb CLASS Files</a></li>
		<li><a href="#day">Creating the Day Files</a></li>
                <li><a href="#documentation">Creating the Composite Document</a></li>
		<li><a href="#codiac">Inserting into the Database</a></li>
		</ol></li>
	<li><a href="#software">Software</a></li>
	<li><a href="#documents">Documentation</a></li>
</ol>
<hr>

<a name="purpose"></a>
<h3>Purpose</h3>
<p>This document contains the instructions on how to generate the 5mb Pressure Level Sounding Composite.</p>
<hr>

<h3>Previous Versions</h3>

<a name="version_rainex"></a>
<h4>RAINEX (2005)</h4>
<table>
        <tr><th>Software:</th><td><a href="http://svn.eol.ucar.edu/svn/dmg/tools/upper_air/composite_5mb_esc/tags/RAINEX_2005">http://svn.eol.ucar.edu/svn/dmg/tools/upper_air/composite_5mb_esc/tags/RAINEX_2005</a></td></tr>
        <tr><th>Raw Data:</th><td>Comes from the final processed soundings.</td></tr>
        <tr><th>Final Data:</th><td></td></tr>
</table>

<a name="version_trex"></a>
<h4>T-REX (2006)</h4>
<table>
	<tr><th>Software:</th><td>/work/TREX/upper_air/composite_5mb/software</td></tr>
	<tr><th>Raw Data:</th><td>Comes from the final processed soundings</td></tr>
	<tr><th>Final Data:</th><td>/archive/data/trex/upper_air/soundings/composite/5mb</td></tr>
</table>

<a name="version_rico"></a>
<h4>RICO (2004-2005)</h4>
<table>
	<tr><th>Software:</th><td>/work/RICO/upperair/composite/highres/software</td></tr>
	<tr><th>Raw Data:</th><td>Comes from the final processed soundings</td></tr>
	<tr><th>Final Data:</th><td>/archive/codiac/rico/upper_air/composite/5mb</td></tr>
</table>
<hr>

<a name="directory"></a>
<h3>Directory Structure</h3>
<table>
	<tr><th>composite_5mb/</th><td>The main directory for the processing.</td></tr>
        <tr><th>build.xml</th><td>Configuration file containing commands to create the composite.</td></tr>
	<tr><td>database</td><td>The directory where the final day files are placed once they have been created.</td></tr>
	<tr><td>data</td><td>The directory where the files are copied to so the software can find it.</td></tr>
	<tr><td>docs</td><td>The directory containing documentation about the processing and the data.</td></tr>
</table>
<hr>

<h3>Processing the Data</h3>

<a name="copy"></a>
<h4>Updating the Project Specific Information</h4>
<p>The first step of creating the composite, is to update the <b>build.xml</b> file with the current project's information.  You will need to change the following properties:</p>
<ul>
    <li><b>project</b></li>
    <li><b>project.dir</b></li>
</ul>
<p>These properties are used by the build to properly name and store the day files once they are created.</p>

<h4>Copying the CLASS Files</h4>
<p>Before the day files can be created, the 5mb files that are going to be included in the composite needed to be copied into the <b>data</b> directory.  This is done by using the <b>copy</b> ant command.  This <b>build.xml</b> file needs to be edited to change the names and locations of the 5mb files for each network.</p>
<p class="code">ant copy</p>

<a name="day"></a>
<h4>Creating the Day Files</h4>
<p>Once the data has been copied to the <b>data</b> directory, they need to be combined to form day files.  This is done using the command:</p>
<p class="code">ant dayfiles</p>
<p>This is a pretty slow process as it must read in all of the sounding headers, sort them by their nominal dates, then reload each sounding by day and generate the day file.  They will be placed in the <code>dayfile.dir</code> directory defined in the <b>build.xml</a> file.</p>

<a name="documentation"></a>
<h4>Creating the Composite Document</h4>
<p>While the day files are being created, you will need to update/write the README document that will be put online with the data.  The amount of changes to the document is relatively small since all of the networks contained in the composite will also have their documents attached to the composite data set containing the specifics.  The document changes include:</p>
<ul>
    <li>Changing the Project ID in the document title and header.</li>
    <li>Changing the list of included networks and links to the specific document in the <i>General Description</i>.</li>
    <li>Updating the project specific information at the end of the <i>General Description</i>.</li>
    <li>Changing the project ID in the <i>Sample Data</i> section.</li>
    <li>Replace the sample data with data from the current project.</li>
    <li>Update the <i>Station List</i> to include all of the stations included in the composite data set.</li>
</ul>

<a name="codiac"></a>
<h4>Inserting into the Database</h4>
<p>With all of the day files created, they need to be inserted into the database.</p>
<hr>

<a name="software"></a>
<h3>Software</h3>
<p>The following is a list of ant targets defined in the <b>build.xml</b> file.</p>
<ul>
   <li><b>copy</b>: This copies all of the best data for each network in the composite into a local data directory.</li>
   <li><b>dayfiles</b>: This generates properly sorted day files for the data contained in the local data directory.</li>
</ul>
<hr>

<a name="documents"></a>
<h3>Documentation</h3>
<p>The following are a list of documents that may help with the conversion or are related to the raw data.</p>
<ul>
    <li><a href="#">How To: Create a 5mb Pressure Level Sounding Composite</a>- This document.</li>
    <li><a href="http://www.eol.ucar.edu/about/our-organization/cds/dmg/dmg-internal/dmg-documentation/how-to/ant-setup-and-use">How To: Set Up and Use Ant</a>- Guide to using and setting up the Ant environment needed to run the composite software.</li>
    <li><a href="http://www.eol.ucar.edu/about/our-organization/cds/dmg/dmg-internal/dmg-documentation/how-to/how-to-use-subversion">How To: Use Subversion</a>- Guide to using subversion.</a>
    <li><a href="readme_rainex_5mb_sounding.html">readme_rainex_5mb_sounding.html</a>- The database readme for the RAINEX project.</li>
    <li><a href="http://www.eol.ucar.edu/about/our-organization/cds/dmg/dmg-internal/dmg-documentation/tutorial/sounding-processing-and-composite-generation">Sounding Processing and Composite Generation Tutorial</a>- Guide to the processing of soundings and the formation of composites.</li>
</ul>
<hr>

<p class="foot">Last Updated: April 2, 2008 - Joel Clawson</p>
</body>
</html>
