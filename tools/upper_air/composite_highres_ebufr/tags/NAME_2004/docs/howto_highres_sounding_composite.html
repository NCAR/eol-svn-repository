<html>
<head>
<title>How To: Create the High Resolution Sounding Composite</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="/dpg/GENERAL/dpg_howto.css">
</head>

<body>
<h1>How To: Create the High Resolution Sounding Composite</h1>
<h2>Table of Contents</h2>
<ol>
	<li><a href="#purpose">Purpose</a></li>
	<li>Previous Versions<ol>
		<li><a href="#version_name">NAME_2004</a></li>
		</ol></li>
	<li><a href="#directory">Directory Structure</a></li>
	<li>Processing the Data<ol>
	        <li><a href="#copy">Copy the CLASS Files</a></li>
		<li><a href="#ebufr">Converting to EBUFR</a></li>
		<li><a href="#codiac">Inserting into the Database</a></li>
		</ol></li>
	<li><a href="#software">Software</a></li>
	<li><a href="#documents">Documentation</a></li>
</ol>
<hr>

<a name="purpose"></a>
<h3>Purpose</h3>
<p>This document contains the instructions on how to generate the High Resolution Sounding Composite.</p>
<hr>

<h3>Previous Versions</h3>

<a name="version_name"></a>
<h4>NAME (2004)</h4>
<table>
	<tr><th>Software:</th><td>/work/NAME/upper_air/composite_highres/software</td></tr>
	<tr><th>Raw Data:</th><td>Comes from the final processed soundings</td></tr>
	<tr><th>Final Data:</th><td>/archive/codiac/name/upper_air/soundings/highres</td></tr>
</table>
<hr>

<a name="directory"></a>
<h3>Directory Structure</h3>
<table>
	<tr><th>composite_highres/</th><td>The main directory for the processing.</td></tr>
	<tr><td>data</td><td>The directory where the files are copied to so the software can find it.</td></tr>
	<tr><td>docs</td><td>The directory containing documentation about the processing and the data.</td></tr>
	<tr><td>ebufr</td><td>The directory where the EBUFR files are placed once they have been created.</td></tr>
	<tr><td>software</td><td>The directory where the software for the conversion is stored.</td></tr>
</table>
<hr>

<h3>Processing the Data</h3>

<a name="copy"></a>
<h4>Copying the CLASS Files</h4>
<p>Before the EBUFR files can be created, the CLASS files that are going to be included in the composite needed to be copied into the <b>data</b> directory.  This is done by using the <a href="../software/copy_class_files.pl">copy_class_files.pl</a> script.  This script needs to be edited to change the project's time of interest along with the names and locations of the CLASS files for each network.  The script fully prepares the data (aligning it into directories by network, making sure only the files in the time of interest are included, and gzipping the data).</p>
<p class="code">./copy_class_files.pl</p>

<a name="ebufr"></a>
<h4>Converting to EBUFR</h4>
<p>The following explains how to EBUFR the QC'ed CLASS files.  This assumes that the class2ebufr binary file has been generated.  For more information on the EBUFR process, see <a href="/dpg/GENERAL/soundings/howto_ebufr_class_soundings.html">How To: EBUFR CLASS Sounding Data</a>.</p>
<ol>
	<li>Change to the software directory (if you are not already there).
	<li>Make sure the EBUFR configuration files are in the directory.  There should be five (class_file, code_08_021, code_33_254, control_scf.txt, desc_file).  The program will crash without these files.</li>
	<li>Edit the <b>control_scf.txt</b> file.
		<p>On the 12th line, (two lines above the "END FILE" line) the project name needs to be edited to match the current project.  The rest of the files should remain untouched.</p>
	<li>Edit the <b>create_ebufr_files.pl</b> script.<ol>
		<li>Change the variable: <b>$PROJECT</b> to the name of the current project.</li>
		<li>Change the variable: <b>$PROJECT</b> to the path of the class2ebufr program to be used for the current project.</li>
		</ol></li>
	<li>Run the <b>create_ebufr_files.pl</b> script.  This will concatonate the CLASS files into day CLASS file which will be used to generate the EBUFR day files.
		<p class="note">The script copies the five aforementioned files to the <b>ebufr</b> directory and removes them once the processing is finished.  This is to force all of the intermediate and final files to be saved in the <b>ebufr</b> directory.</p>
</ol>

<a name="codiac"></a>
<h4>Inserting into the Database</h4>
<p>With all of the EBUFR files created, they need to be inserted into the database.  This is a general process and is explained in the document: <a href="/dpg/GENERAL/soundings/howto_insert_ebufred_class_soundings.html">How To: Insert EBUFRed CLASS Sounding Data</a>.</p>
<hr>

<a name="software"></a>
<h3>Software</h3>
<p>The following is a list of the contents of the <b>software</b> directory with a brief explanation of the file.</p>
<ul>
	<li><b>class_file</b>- A configuration file for the <b>class2ebufr</b> program.</li>
	<li><b>code_08_021</b>- A configuration file for the <b>class2ebufr</b> program.</li>
	<li><b>code_33_254</b>- A configuration file for the <b>class2ebufr</b> program.</li>
	<li><b>control_scf.txt</b>- A configuration file for the <b>class2ebufr</b> program.</li>
	<li><b><a href="/cgi-bin/dpg/doc/docperl.cgi?file=/work/NAME/upper_air/composite_highres/software/copy_class_files.pl">copy_class_files.pl</a></b>- Copy all of the final CLASS formated sounding data and prepare it to be converted into EBUFR.</li>
	<li><b><a href="/cgi-bin/dpg/doc/docperl.cgi?file=/work/NAME/upper_air/composite_highres/software/create_ebufr_files.pl">create_ebufr_files.pl</a></b>- Convert the QC'ed CLASS files into daily EBUFR files.</li>
	<li><b>desc_file</b>- A configuration file for the <b>class2ebufr</b> program.</li>
</ul>
<hr>

<a name="documents"></a>
<h3>Documentation</h3>
<p>The following are a list of documents that may help with the conversion or are related to the raw data.</p>
<ul>
	<li><a href="/dpg/GENERAL/soundings/howto_ebufr_class_soundings.html">How To: EBUFR CLASS Sounding Data</a>- The instructions for dealing with the EBUFR software that relate to CLASS Soundings.</li>
	<li><a href="/dpg/GENERAL/soundings/howto_insert_ebufred_class_soundings.html">How To: Insert EBUFR'ed CLASS Sounding Data into the Database</a>- The instructions on how insert the EBUFR'ed sounding data into the database.</li>
	<li><a href="#">How To: Create a High Resolution Sounding Composite</a>- This document.</li>
	<li><a href="README_NAME_HighRes_sounding.html">README_NAME_HighRes_sounding.html</a>- The database readme for the NAME project.</li>
</ul>
<hr>

<p class="foot">Last Updated: February 2, 2006 - Joel Clawson</p>
</body>
</html>
